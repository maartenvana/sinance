@model Sinance.Web.ViewComponents.YearlyProfitGraphViewComponentModel

<script type="text/javascript">
    var profitGraphCurrentYear;

    $(function () {
        CreateProfitGraph(@Model.InitialYear);
    });

    function CreateProfitGraph(year) {
        profitGraphCurrentYear = year;
        $("#profitGraphYearSpan").text(year);

        $.ajax({
            type: "POST",
            url: "@Url.Action("ProfitPerMonthForYear", "Graph")",
            data: { year: year },
            success: function (response) {

                var chart = new Highcharts.Chart({
                    chart: {
                        renderTo: "profitGraph",
                        type: "column",
                        zoomType: "x"
                    },
                    title: {
                        floating: true,
                        text: ""
                    },
                    yAxis: {
                        title: {
                            text: ""
                        }
                    },
                    xAxis: {
                        categories: ["Jan", "Feb", "Maa", "Apr", "Mei", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dec"]
                    },
                    credits: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            depth: 25
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    tooltip: {
                        formatter: ChartCurrencyFormatter
                    },
                    series: [
                        {
                            data: response.objectData
                        }
                    ]
                });
            }
        });
    }
</script>

<div class="panel panel-default">
    <div class="panel-heading">
        <i class="fa fa-bar-chart-o fa-fw"></i> Winst/Verlies
        @if (Model.CanChangeYear)
        {
            <div class="pull-right">
                <a href="#" onclick=" CreateProfitGraph(profitGraphCurrentYear - 1);"><i class="fa fa-chevron-left fa-fw"></i></a> <span id="profitGraphYearSpan"></span> <a href="#" onclick="CreateProfitGraph(profitGraphCurrentYear + 1);"><i class="fa fa-chevron-right fa-fw"></i></a>
            </div>
        }
    </div>
    <div class="panel-body">
        <div id="profitGraph" style="height: 400px;"></div>
    </div>
</div>